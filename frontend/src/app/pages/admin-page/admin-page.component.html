<div class="title">
  <h1>Welcome to Admin Panel</h1>
</div>

<ng-container *ngIf="!this.lastFiveItemsList && this.dataSource.data">
  <div class="spinner">
    <mat-progress-spinner
      class="example-margin"
      color="primary"
      mode="indeterminate"
    >
    </mat-progress-spinner>
  </div>
</ng-container>

<ng-container *ngIf="this.lastFiveItemsList && this.dataSource.data">
  <div class="text">
    <p>Last five added items: </p>
  </div>

  <div class="cards">
    <mat-card appearance="outlined" class="example-card" *ngFor="let item of lastFiveItemsList">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title>{{item.name }}</mat-card-title>
      </mat-card-header>
      <img mat-card-image src="{{item.imageSrc}}" alt="Photo of an item" style="width: 250px; height: 250px;">
      <mat-card-content>
        <p class="mat-line-clamp"> {{item.description}}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/admin/items/{{item.id}}/view" routerLinkActive="active">VIEW</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="row">
    <div class="text">
      <p>Category statistics</p>
    </div>

    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef>Category Name</th>
        <td mat-cell *matCellDef="let stats"> {{stats.category}} </td>
      </ng-container>

      <ng-container matColumnDef="itemsCount">
        <th mat-header-cell *matHeaderCellDef> Items Count</th>
        <td mat-cell *matCellDef="let stats"> {{stats.itemsCount}}</td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let columns; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="paginator">
    <mat-paginator
      class="paginator"
      [length]="this.totalElements"
      [pageIndex]="currentPage"
      [pageSize]="currentSize"
      [pageSizeOptions]="[5, 10, 25, 100]"
      (page)="pageChanged($event)"
      aria-label="Select page">>
    </mat-paginator>
  </div>


</ng-container>
<div class="buttons">
  <button class="button" routerLink="items">Items</button>
  <button class="button" routerLink="categories">Categories</button>
</div>
